

<!DOCTYPE html>
<html>
<head>
    <style type="text/css">

        * {
            box-sizing: border-box;
        }

        .column {
            float: left;
            width: 50%;

            padding: 5px;
        }

        /* Clearfix (clear floats) */
        .row_img::after {
            content: "";
            clear: both;
            display: table;
        }
        /* Legend Font Style */
        body {
            font: 11px sans-serif;
            background-color: #ffffff;
        }

        /* Legend Position Style */
        .legend {
            position:absolute;
            left:20px;
            top:30px;
        }

        .axis text {
            font: 10px sans-serif;
        }

        .axis line, .axis path {
            fill: none;
            stroke: #000;
            shape-rendering: crispEdges;
        }

        div.tooltip {
            position: absolute;
            text-align: center;
            width: 60px;
            height: 28px;
            padding: 2px;
            font: 12px sans-serif;
            background: lightsteelblue;
            border: 0px;
            border-radius: 8px;
            pointer-events: none;
        }

    </style>
    <script src="static/js/main.js" type="text/javascript"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="static/css/main.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

    <script src="static/js/bar_chart.js" type="text/javascript"></script>
    <script src="static/js/single_line_chart.js" type="text/javascript"></script>
    <script src="static/js/line_chart.js" type="text/javascript"></script>
    <script src="static/js/choropleth.js" type="text/javascript"></script>
    <script src="static/js/line_chart1.js" type="text/javascript"></script>
    <script src="static/js/brush_chart.js" type="text/javascript"></script>
    <script src="static/js/scree_plot.js" type="text/javascript"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">



</head>

<body style = "background-color: #E4E7ED">
<div id="mySidenav" class="sidenav">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
    <a href = "#">Home</a>
    <a href = "# analysis">Pollutants analysis</a>
    <a href = "#">Population and pollution - USA</a>
    <a href = "#">Deaths and pollution - USA</a>
    <a href = "#">Population & Deaths VS Pollution - statewise</a>
    <a href = "#">Principal components analysis</a>
    <a href = "#">Brushing Chart</a>
</div>

    <div id="main">
        <span style="color: #08809C ;font-size:30px;cursor:pointer" onclick="openNav()">&#9776; Menu</span>
    </div>
<div id = "vert_line" class="vl"></div>
<div></div>
<hr id ="hor_line" style="position: absolute">


<div class="container">
    <div class="row" id = "row_div">

    </div>
</div>
<script id="page0_div" type="text/html">

<!--    <img src="http://www.facethefactsusa.org/sites/facethefactsusa.org/files/FTFin-environment-kids-asthma.jpg" width="500" height="800" alt="...">-->
<!--    <img src="https://www.who.int/airpollution/infographics/Air-pollution-INFOGRAPHICS-English-1.1200px.jpg?ua=1" width="500" height="700" alt="...">-->
<!--<img src="https://www.who.int/airpollution/infographics/Air-pollution-INFOGRAPHICS-English-4-1200px.jpg?ua=1" width="500" height="700" >-->


<div class="row_img">
    <div class="column">
        <img src="https://www.who.int/airpollution/infographics/Air-pollution-INFOGRAPHICS-English-4-1200px.jpg?ua=1" alt="Snow" style="width:100%">
    </div>
    <div class="column">
        <img src="https://www.who.int/airpollution/infographics/Air-pollution-INFOGRAPHICS-English-1.1200px.jpg?ua=1" alt="Forest" style="width:100%">
    </div>

</div>

</script>

<script id="page1_div" type="text/html">
    <div class = "col-6"  >
        <select onchange="page1()" id = "year">
            <option selected="selected">Year</option>
            <option value="2016">2016</option>
            <option value="2015">2015</option>
            <option value="2014">2014</option>
            <option value="2013">2013</option>
            <option value="2012">2012</option>
            <option value="2011">2011</option>
            <option value="2010">2010</option>
            <option value="2009">2009</option>
            <option value="2008">2008</option>
            <option value="2007">2007</option>
            <option value="2006">2006</option>
            <option value="2005">2005</option>
            <option value="2004">2004</option>
            <option value="2003">2003</option>
            <option value="2002">2002</option>
            <option value="2001">2001</option>
            <option value="2000">2000</option>
            <option value="1999">1999</option>\
        </select>
        <select onchange="page1()" id="pollutant">
            <option selected="selected">Pollutant</option>
            <option value="NO2">NO2</option>
            <option value="O3">O3</option>
            <option value="SO2">SO2</option>
            <option value="CO">CO</option>
        </select>
    </div>
    <div class = "col-2"   ></div>
    <div class = "col-4"   >
        <select id="state_list"   onchange="page1b()">
            <option selected="selected">State</option>
            <option value="Alabama">Alabama</option>
            <option value="Alaska">Alaska</option>
            <option value="Arizona">Arizona</option>
            <option value="Arkansas">Arkansas</option>
            <option value="California">California</option>
            <option value="Colorado">Colorado</option>
            <option value="Connecticut">Connecticut</option>
            <option value="Delaware">Delaware</option>
            <!--<option value="DC">District Of Columbia</option>-->
            <option value="Florida">Florida</option>
            <option value="Georgia">Georgia</option>
            <option value="Hawaii">Hawaii</option>
            <option value="Idaho">Idaho</option>
            <option value="Illinois">Illinois</option>
            <option value="Indiana">Indiana</option>
            <option value="Iowa">Iowa</option>
            <option value="Kansas">Kansas</option>
            <option value="Kentucky">Kentucky</option>
            <option value="Louisiana">Louisiana</option>
            <option value="Maine">Maine</option>
            <option value="Maryland">Maryland</option>
            <option value="Massachusetts">Massachusetts</option>
            <option value="Michigan">Michigan</option>
            <option value="Minnesota">Minnesota</option>
            <option value="Mississippi">Mississippi</option>
            <option value="Missouri">Missouri</option>
            <option value="Montana">Montana</option>
            <option value="Nebraska">Nebraska</option>
            <option value="Nevada">Nevada</option>
            <option value="New Hampshire">New Hampshire</option>
            <option value="New Jersey">New Jersey</option>
            <option value="New Mexico">New Mexico</option>
            <option value="New York">New York</option>
            <option value="North Carolina">North Carolina</option>
            <option value="North Dakota">North Dakota</option>
            <option value="Ohio">Ohio</option>
            <option value="Oklahoma">Oklahoma</option>
            <option value="Oregon">Oregon</option>
            <option value="Pennsylvania">Pennsylvania</option>
            <option value="Rhode Island">Rhode Island</option>
            <option value="South Carolina">South Carolina</option>
            <option value="South Dakota">South Dakota</option>
            <option value="Tennessee">Tennessee</option>
            <option value="Texas">Texas</option>
            <option value="Utah">Utah</option>
            <option value="Vermont">Vermont</option>
            <option value="Virginia">Virginia</option>
            <option value="Washington">Washington</option>
            <option value="West Virginia">West Virginia</option>
            <option value="Wisconsin">Wisconsin</option>
            <option value="Wyoming">Wyoming</option>
        </select>
        <select id="pollutant_2"  onchange="page1b()">
            <option selected="selected">Pollutant</option>
            <option value="NO2">NO2</option>
            <option value="O3">O3</option>
            <option value="SO2">SO2</option>
            <option value="CO">CO</option>
        </select>
    </div>
</script>

<script id="page2_div" type="text/html">

    <div class = "col-6"  >
        <select onchange="page2()" id = "popn_polln_year">
            <option selected="selected">Year</option>
            <option value="2015">2015</option>
            <option value="2014">2014</option>
            <option value="2013">2013</option>
            <option value="2012">2012</option>
            <option value="2011">2011</option>
            <option value="2010">2010</option>
            <option value="2009">2009</option>
            <option value="2008">2008</option>
            <option value="2007">2007</option>
            <option value="2006">2006</option>
            <option value="2005">2005</option>
            <option value="2004">2004</option>
            <option value="2003">2003</option>
            <option value="2002">2002</option>
            <option value="2001">2001</option>
            <option value="2000">2000</option>
            <option value="1999">1999</option>\
        </select>
    </div>
    <div class = "col-2"   ></div>
    <div class = "col-4"   >
        <select id="popn_pollutant"  onchange="page2()">
            <option selected="selected">Pollutant</option>
            <option value="NO2">NO2</option>
            <option value="O3">O3</option>
            <option value="SO2">SO2</option>
            <option value="CO">CO</option>
        </select>
    </div>
</script>

<script id="page3_div" type="text/html">
    <div class = "col-6"  >
        <select id="popn_state_list" onchange="page3a()">
            <option selected="selected">State</option>
            <option value="Alabama">Alabama</option>
            <option value="Alaska">Alaska</option>
            <option value="Arizona">Arizona</option>
            <option value="Arkansas">Arkansas</option>
            <option value="California">California</option>
            <option value="Colorado">Colorado</option>
            <option value="Connecticut">Connecticut</option>
            <option value="Delaware">Delaware</option>
            <!--<option value="DC">District Of Columbia</option>-->
            <option value="Florida">Florida</option>
            <option value="Georgia">Georgia</option>
            <option value="Hawaii">Hawaii</option>
            <option value="Idaho">Idaho</option>
            <option value="Illinois">Illinois</option>
            <option value="Indiana">Indiana</option>
            <option value="Iowa">Iowa</option>
            <option value="Kansas">Kansas</option>
            <option value="Kentucky">Kentucky</option>
            <option value="Louisiana">Louisiana</option>
            <option value="Maine">Maine</option>
            <option value="Maryland">Maryland</option>
            <option value="Massachusetts">Massachusetts</option>
            <option value="Michigan">Michigan</option>
            <option value="Minnesota">Minnesota</option>
            <option value="Mississippi">Mississippi</option>
            <option value="Missouri">Missouri</option>
            <option value="Montana">Montana</option>
            <option value="Nebraska">Nebraska</option>
            <option value="Nevada">Nevada</option>
            <option value="New Hampshire">New Hampshire</option>
            <option value="New Jersey">New Jersey</option>
            <option value="New Mexico">New Mexico</option>
            <option value="New York">New York</option>
            <option value="North Carolina">North Carolina</option>
            <option value="North Dakota">North Dakota</option>
            <option value="Ohio">Ohio</option>
            <option value="Oklahoma">Oklahoma</option>
            <option value="Oregon">Oregon</option>
            <option value="Pennsylvania">Pennsylvania</option>
            <option value="Rhode Island">Rhode Island</option>
            <option value="South Carolina">South Carolina</option>
            <option value="South Dakota">South Dakota</option>
            <option value="Tennessee">Tennessee</option>
            <option value="Texas">Texas</option>
            <option value="Utah">Utah</option>
            <option value="Vermont">Vermont</option>
            <option value="Virginia">Virginia</option>
            <option value="Washington">Washington</option>
            <option value="West Virginia">West Virginia</option>
            <option value="Wisconsin">Wisconsin</option>
            <option value="Wyoming">Wyoming</option>
        </select>
        <select onchange="page3a()" id="popn_states_polln">
            <option selected="selected">Pollutant</option>
            <option value="NO2">NO2</option>
            <option value="O3">O3</option>
            <option value="SO2">SO2</option>
            <option value="CO">CO</option>
        </select>
    </div>
    <div class = "col-6"  >
        <select id="deaths_state_list" onchange="page3b()">
            <option selected="selected">State</option>
            <option value="Alabama">Alabama</option>
            <option value="Alaska">Alaska</option>
            <option value="Arizona">Arizona</option>
            <option value="Arkansas">Arkansas</option>
            <option value="California">California</option>
            <option value="Colorado">Colorado</option>
            <option value="Connecticut">Connecticut</option>
            <option value="Delaware">Delaware</option>
            <!--<option value="DC">District Of Columbia</option>-->
            <option value="Florida">Florida</option>
            <option value="Georgia">Georgia</option>
            <option value="Hawaii">Hawaii</option>
            <option value="Idaho">Idaho</option>
            <option value="Illinois">Illinois</option>
            <option value="Indiana">Indiana</option>
            <option value="Iowa">Iowa</option>
            <option value="Kansas">Kansas</option>
            <option value="Kentucky">Kentucky</option>
            <option value="Louisiana">Louisiana</option>
            <option value="Maine">Maine</option>
            <option value="Maryland">Maryland</option>
            <option value="Massachusetts">Massachusetts</option>
            <option value="Michigan">Michigan</option>
            <option value="Minnesota">Minnesota</option>
            <option value="Mississippi">Mississippi</option>
            <option value="Missouri">Missouri</option>
            <option value="Montana">Montana</option>
            <option value="Nebraska">Nebraska</option>
            <option value="Nevada">Nevada</option>
            <option value="New Hampshire">New Hampshire</option>
            <option value="New Jersey">New Jersey</option>
            <option value="New Mexico">New Mexico</option>
            <option value="New York">New York</option>
            <option value="North Carolina">North Carolina</option>
            <option value="North Dakota">North Dakota</option>
            <option value="Ohio">Ohio</option>
            <option value="Oklahoma">Oklahoma</option>
            <option value="Oregon">Oregon</option>
            <option value="Pennsylvania">Pennsylvania</option>
            <option value="Rhode Island">Rhode Island</option>
            <option value="South Carolina">South Carolina</option>
            <option value="South Dakota">South Dakota</option>
            <option value="Tennessee">Tennessee</option>
            <option value="Texas">Texas</option>
            <option value="Utah">Utah</option>
            <option value="Vermont">Vermont</option>
            <option value="Virginia">Virginia</option>
            <option value="Washington">Washington</option>
            <option value="West Virginia">West Virginia</option>
            <option value="Wisconsin">Wisconsin</option>
            <option value="Wyoming">Wyoming</option>
        </select>
        <select onchange="page3b()" id="deaths_states_polln">
            <option selected="selected">Year</option>
            <option value="NO2">NO2</option>
            <option value="O3">O3</option>
            <option value="SO2">SO2</option>
            <option value="CO">CO</option>
        </select>
    </div>
</script>

<script id="page4_div" type="text/html">
    <div class = "col-6"  >
        <select onchange="page4()" id = "deaths_polln_year">
            <option selected="selected">Year</option>
            <option value="2015">2015</option>
            <option value="2014">2014</option>
            <option value="2013">2013</option>
            <option value="2012">2012</option>
            <option value="2011">2011</option>
            <option value="2010">2010</option>
            <option value="2009">2009</option>
            <option value="2008">2008</option>
            <option value="2007">2007</option>
            <option value="2006">2006</option>
            <option value="2005">2005</option>
            <option value="2004">2004</option>
            <option value="2003">2003</option>
            <option value="2002">2002</option>
            <option value="2001">2001</option>
            <option value="2000">2000</option>
            <option value="1999">1999</option>\
        </select>
    </div>
    <div class = "col-2"   ></div>
    <div class = "col-4"   >
        <select id="deaths_pollutant"  onchange="page4()">
            <option selected="selected">Pollutant</option>
            <option value="NO2">NO2</option>
            <option value="O3">O3</option>
            <option value="SO2">SO2</option>
            <option value="CO">CO</option>
        </select>
    </div>
</script>

<script id="page5_div" type="text/html">
</script>

<script id="page6_div" type="text/html">
    <div class = "col-12"  >
        <select onchange="page6()" id = "brush_year">
<!--            <option selected="selected">Year</option>-->
            <option selected="selected">Year</option>
            <option value="2015">2015</option>
            <option value="2014">2014</option>
            <option value="2013">2013</option>
            <option value="2012">2012</option>
            <option value="2011">2011</option>
            <option value="2010">2010</option>
            <option value="2009">2009</option>
            <option value="2008">2008</option>
            <option value="2007">2007</option>
            <option value="2006">2006</option>
            <option value="2005">2005</option>
            <option value="2004">2004</option>
            <option value="2003">2003</option>
            <option value="2002">2002</option>
            <option value="2001">2001</option>
            <option value="2000">2000</option>
            <option value="1999">1999</option>
        </select>
    </div>

        <div class="col-12">
            <div id="scatterplot"></div>
            <div id="choropleth"></div>
        </div>

</script>





<script>
    document.getElementById('row_div').innerHTML = document.getElementById('page0_div').innerHTML;

d3.select('#mySidenav').selectAll('a').on('click', get_side_bar_option);

// d3.select('#inyear').selectAll('a').on('click', function(){ update_map("year")});
// d3.select('#inpoll').selectAll('a').on('click',function(){ update_map("poll")});


function get_side_bar_option() {
    // d3.selectAll('svg').remove();
    var opt = d3.select(this).text();
    if (opt==="Home") {
        d3.selectAll('svg').remove();
        d3.select('#loadings_table').remove();
        document.getElementById('row_div').innerHTML = document.getElementById('page0_div').innerHTML;
        $("#vert_line").css({left:"0%" ,position:"absolute"});
        // page1();
    }
    if (opt==="Pollutants analysis") {
        d3.selectAll('svg').remove();
        d3.select('#loadings_table').remove();
        document.getElementById('row_div').innerHTML = document.getElementById('page1_div').innerHTML;
        $("#vert_line").css({left:"60%" ,position:"absolute"});
        page1();
        page1b()
    }
    if (opt==="Population and pollution - USA") {
        d3.selectAll('svg').remove();
        d3.select('#loadings_table').remove();
        document.getElementById('row_div').innerHTML = document.getElementById('page2_div').innerHTML;
        $("#vert_line").css({left:"50%" ,position:"absolute"});
        page2();
    }
    if (opt==="Population & Deaths VS Pollution - statewise") {
        d3.selectAll('svg').remove();
        d3.select('#loadings_table').remove();
        document.getElementById('row_div').innerHTML = document.getElementById('page3_div').innerHTML;
        $("#vert_line").css({left:"50%" ,position:"absolute"});
        page3a();
        page3b();
    }
    if (opt==="Deaths and pollution - USA") {
        d3.selectAll('svg').remove();
        d3.select('#loadings_table').remove();
        document.getElementById('row_div').innerHTML = document.getElementById('page4_div').innerHTML;
        $("#vert_line").css({left:"50%" ,position:"absolute"});
        page4();
    }
    // if (opt==="Deaths and pollution - statewise") {
    //     document.getElementById('row_div').innerHTML = document.getElementById('page5_div').innerHTML;
    //     page5();
    // }
    if (opt==="Principal components analysis") {
        d3.selectAll('svg').remove();
        d3.select('#loadings_table').remove();
        document.getElementById('row_div').innerHTML = document.getElementById('page5_div').innerHTML;
        $("#vert_line").css({left:"0%" ,position:"absolute"});
        page5();
    }
    if (opt==="Brushing Chart") {
        d3.selectAll('svg').remove();
        d3.select('#loadings_table').remove();
        document.getElementById('row_div').innerHTML = document.getElementById('page6_div').innerHTML;
      page6();
    }
}




function page1() {



    d3.selectAll("#page1_svg").remove();
    d3.select("#page1_2_svg").remove();
    var temp_yr = document.getElementById("year").value;
    var temp_poll = document.getElementById('pollutant').value;

    if (temp_yr == "Year")
    {

        temp_yr = "2015";
        temp_poll = "SO2";
    }
    else
    {
        temp_yr = document.getElementById("year").value;
        temp_poll =document.getElementById('pollutant').value;
    }

    $.ajax({
        url: "/us_map",
        type: "POST",
        contentType: "application/json",
        data: JSON.stringify({ "year": temp_yr,
            "pollutant": temp_poll})
    }).done(function(data) {
        // if (opt=="Pollutants analysis"){

        choropleth(data)
        // }

    });

    $.ajax({
        type: 'GET',
        url : "/overview_bar_chart",
        data: {
            "pollutant": temp_poll
        },
        contentType: 'application/json; charset=utf-8',
        xhrFields: {
            withCredentials: false
        },
        headers: {
        },
        success: function(result) {
            result = JSON.parse(result);

            draw_bar_chart(result, temp_poll)
        }
    });

}

function page1b() {



    d3.select('#singleline').remove();
    $("#vert_line").css({left:"60%" ,position:"absolute"});

    var temp_st = document.getElementById("state_list").value;
    var temp_poll = document.getElementById('pollutant_2').value;

    if (temp_st == "State")
    {

        temp_st = "California";
        temp_poll = "SO2";
    }
    else
    {
        temp_st = document.getElementById("state_list").value;
        temp_poll =document.getElementById('pollutant_2').value;
    }
    $.ajax({
        type: 'GET',
        url : "/overview_line_chart",
        data: {
            "state": temp_st,
            "pollutant": temp_poll
        },
        contentType: 'application/json; charset=utf-8',
        xhrFields: {
            withCredentials: false
        },
        headers: {
        },
        success: function(result) {
            result = JSON.parse(result);
            console.log(result)
            draw_single_line_chart(result,temp_poll)
        }
    });
}

function page2() {
    d3.selectAll('svg').remove()

    // $("#hor_line").css({border: "1px solid whitesmoke", position: "absolute", 'margin-top':"500px"});
    var temp_yr = document.getElementById("popn_polln_year").value;
    var temp_poll = document.getElementById('popn_pollutant').value;

    if (temp_yr == "Year")
    {

        temp_yr = "2015";
        temp_poll = "SO2";
    }
    else
    {
        temp_yr = document.getElementById("popn_polln_year").value;
        temp_poll =document.getElementById('popn_pollutant').value;
    }
    $.ajax({
        url: "/popn_US_map",
        type: "GET",
        contentType: "application/json",
        data: { "year": temp_yr}
    }).done(function(data) {
        // if (opt=="Pollutants analysis"){
        console.log(data)
        choropleth(data)
        // }

        $("#page1_svg").css({top:100,left:20 , position:"absolute"});

    });

    $.ajax({
        type: 'GET',
        url : "/population_pollution_US_line_chart",
        data: {
            "pollutant": temp_poll
        },
        contentType: 'application/json; charset=utf-8',
        xhrFields: {
            withCredentials: false
        },
        headers: {
        },
        success: function(result) {
            result = JSON.parse(result);
            draw_line_chart(result, temp_poll, "Population")
            $("#double_line").css({top:100,left:720, position:"absolute"});
        }
    });


}

function page3a() {
    d3.select('#double_line').remove()
    var temp_st = document.getElementById("popn_state_list").value;
    var temp_poll = document.getElementById('popn_states_polln').value;

    if (temp_st == "State")
    {

        temp_st = "California";
        temp_poll = "SO2";
    }
    else
    {
        temp_st = document.getElementById("popn_state_list").value;
        temp_poll =document.getElementById('popn_states_polln').value;
    }

    $("#vert_line").css({left:"50%" ,position:"absolute"});
    $.ajax({
        type: 'GET',
        url : "/population_pollution_states_line_chart",
        data: {
            "state": temp_st,
            "pollutant": temp_poll
        },
        contentType: 'application/json; charset=utf-8',
        xhrFields: {
            withCredentials: false
        },
        headers: {
        },
        success: function(result) {
            result = JSON.parse(result);
            draw_line_chart(result, temp_poll, "Population")
        }
    });

}

function page3b()
{
    d3.select('#double_line1').remove()
    var temp_st = document.getElementById("deaths_state_list").value;
    var temp_poll = document.getElementById('deaths_states_polln').value;

    if (temp_st == "State")
    {

        temp_st = "California";
        temp_poll = "SO2";
    }
    else
    {
        temp_st = document.getElementById("deaths_state_list").value;
        temp_poll =document.getElementById('deaths_states_polln').value;
    }
    $.ajax({
        type: 'GET',
        url : "/deaths_pollution_states_line_chart",
        data: {
            "state": temp_st,
            "pollutant": temp_poll
        },
        contentType: 'application/json; charset=utf-8',
        xhrFields: {
            withCredentials: false
        },
        headers: {
        },
        success: function(result) {
            result = JSON.parse(result);
            draw_line_chart1(result, temp_poll, "DeathCount")
            $("#double_line1").css({top:100,left:720, position:"absolute"});
        }
    });

}

function page4() {
    d3.selectAll('svg').remove()
    var temp_yr = document.getElementById("deaths_polln_year").value;
    var temp_poll = document.getElementById('deaths_pollutant').value;

    if (temp_yr == "Year")
    {

        temp_yr = "2015";
        temp_poll = "SO2";
    }
    else
    {
        temp_yr = document.getElementById("deaths_polln_year").value;
        temp_poll = document.getElementById('deaths_pollutant').value;
    }

    $.ajax({
        url: "/deaths_US_map",
        type: "GET",
        contentType: "application/json",
        data: { "year": temp_yr}
    }).done(function(data) {
        // if (opt=="Pollutants analysis"){
        console.log(data)
        choropleth(data)

        $("#page1_svg").css({top:100,left:20 , position:"absolute"});
        // }

    });

    $.ajax({
        type: 'GET',
        url : "/deaths_pollution_US_line_chart",
        data: {
            "pollutant": temp_poll
        },
        contentType: 'application/json; charset=utf-8',
        xhrFields: {
            withCredentials: false
        },
        headers: {
        },
        success: function(result) {
            result = JSON.parse(result);
            draw_line_chart(result, temp_poll, "DeathCount")
            $("#double_line").css({top:100,left:720, position:"absolute"});
        }
    });
}

function page5() {


        $.ajax({
            type: 'GET',
            url : "/pca_scree_plot",
            data: {
            },
            contentType: 'application/json; charset=utf-8',
            xhrFields: {
                withCredentials: false
            },
            headers: {
            },
            success: function(result) {
                console.log(result)
                result = JSON.parse(result);
                console.log(result)
                scree_plot(result)
            }
        });

    $.ajax({
        type: 'GET',
        url : "/pca_loadings",
        data: {
        },
        contentType: 'application/json; charset=utf-8',
        xhrFields: {
            withCredentials: false
        },
        headers: {
        },
        success: function(result) {

            // d3.select("body").append("div").attr("id","table_loadings")
            // d3.select("#table_loadings").innerHTML = result
            var z = document.createElement('div') // is a node
            z.id = 'loadings_table'
            z.innerHTML = result;

            document.body.appendChild(z);
        }
    });
// ("#loadings_table").css({top:100,left:720, position:"absolute"});

}

function page6() {
    d3.selectAll('svg').remove();


    var temp_yr = document.getElementById("brush_year").value;


    if (temp_yr == "Year")
    {

        temp_yr = "2015";

    }
    else
    {
        temp_yr = document.getElementById("brush_year").value;

    }

    $.ajax({
        type: 'GET',
        url : "/brush_chart",
        data: {
     "year": temp_yr
        },
        contentType: 'application/json; charset=utf-8',
        xhrFields: {
            withCredentials: false
        },
        headers: {
        },
        success: function(result) {
            result = JSON.parse(result);
            console.log(result);
           draw_brush(result)
            $("#scatterplot").css({top:50,left:20 , position:"absolute"});
            $("#choropleth").css({top:50,left:700 , position:"absolute"});

        }
    });
}

</script>
</body>

</html>
